import{j as t}from"./index-7s7xaQU8.js";import{r as m}from"./index-CC6F48bw.js";import{S as x,D as y,W as v,a as T,M as j}from"./month-view-oXMugNgu.js";/* empty css               */import"./index-qiR4Kxfn.js";const w=(a,l="")=>{const u=(r,c,h=0)=>new Date(r.getFullYear(),r.getMonth(),r.getDate(),c,h);new Date(a).setDate(a.getDate()-1),new Date(a).setDate(a.getDate()+1);const f=[];for(let r=0;r<12;r++){const c=r%3-1,h=new Date(a);h.setDate(a.getDate()+c);const S=7+r%12,e=u(h,S),n=new Date(e),s=r%4+1;n.setHours(e.getHours()+s),f.push({Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:r===0?"A1 - All-day":`${l} ${r+1} - ${c===-1?"Prev":c===0?"Today":"Next"} (${s}h)`,StartTime:e,EndTime:n,IsAllDay:r===0,Location:r%2===0?"Office":"Remote",Description:`${l} autogenerated event #${r+1}`})}return f},N=()=>{const a=m.useRef(null),l=m.useRef(null),u=m.useRef(null),D=m.useRef(null),R={dataSource:w(new Date(2017,9,30),"A"),fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},f={dataSource:w(new Date(2017,9,30),"B"),fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},r=e=>({Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:e.Subject??"Untitled",StartTime:e.StartTime??e.startTime,EndTime:e.EndTime??e.endTime,IsAllDay:e.IsAllDay??e.isAllDay,Location:e.Location??e.location,Description:e.Description??e.description}),c=(e,n)=>!!(e.current&&n&&e.current.contains(n)),h=e=>{var s,o,i,g;const n=e.target||null;if(!(!n||!e.data)&&c(D,n)){const d=e.data,p=d.Id??d.id;(o=(s=a.current)==null?void 0:s.deleteEvent)==null||o.call(s,p),(g=(i=l.current)==null?void 0:i.addEvent)==null||g.call(i,r(e.data))}},S=e=>{var s,o,i,g;const n=e.target||null;if(!(!n||!e.data)&&c(u,n)){const d=e.data,p=d.Id??d.id;(o=(s=l.current)==null?void 0:s.deleteEvent)==null||o.call(s,p),(g=(i=a.current)==null?void 0:i.addEvent)==null||g.call(i,r(e.data))}};return t.jsxs("div",{className:"control-section",children:[t.jsxs("div",{className:"schedulers-container",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[t.jsxs("div",{ref:u,style:{minWidth:0},children:[t.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler A"}),t.jsxs(x,{className:"sf-first",ref:a,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:!0,externalDragAndDrop:!0,eventDragArea:".schedulers-container",interval:15,scroll:{enable:!0,scrollBy:8,timeDelay:10}},eventSettings:R,onDragStop:h,children:[t.jsx(y,{}),t.jsx(v,{}),t.jsx(T,{}),t.jsx(j,{})]})]}),t.jsxs("div",{ref:D,style:{minWidth:0},children:[t.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler B"}),t.jsxs(x,{className:"sf-second",ref:l,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:!0,externalDragAndDrop:!0,eventDragArea:".schedulers-container",interval:15,scroll:{enable:!0,scrollBy:8,timeDelay:10}},eventSettings:f,onDragStop:S,children:[t.jsx(y,{}),t.jsx(v,{}),t.jsx(T,{}),t.jsx(j,{})]})]})]}),t.jsx("p",{style:{marginTop:12,color:"#555"},children:"Drag events between the two schedulers. When an event is dropped in the other scheduler, it is removed from the source and added to the target."})]})},U={title:"Scheduler/External Drag & Drop",parameters:{layout:"padded"},tags:["autodocs"]},E={render:()=>t.jsx(N,{})},I={render:()=>{const a=()=>{const l=m.useRef(null),u=m.useRef(null),D=m.useRef(null),R={dataSource:w(new Date(2017,9,30),"A"),fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},f={dataSource:w(new Date(2017,9,30),"B"),fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},r={dataSource:w(new Date(2017,9,30),"C"),fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},c=e=>({Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:e.Subject??"Untitled",StartTime:e.StartTime??e.startTime,EndTime:e.EndTime??e.endTime,IsAllDay:e.IsAllDay??e.isAllDay,Location:e.Location??e.location,Description:e.Description??e.description}),h=e=>e?e.closest(".sf-first")?l:e.closest(".sf-second")?u:e.closest(".sf-third")?D:null:null,S=e=>n=>{var d,p,A,k;const s=n.target||null;if(!s||!n.data)return;const o=h(s);if(!o||o===e)return;const i=n.data,g=i.Id??i.id;(p=(d=e.current)==null?void 0:d.deleteEvent)==null||p.call(d,g),(k=(A=o.current)==null?void 0:A.addEvent)==null||k.call(A,c(n.data))};return t.jsx("div",{className:"control-section",children:t.jsxs("div",{className:"schedulers-container",style:{display:"grid",gridTemplateColumns:"1fr",gap:16},children:[t.jsxs("div",{style:{minWidth:0},children:[t.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler A"}),t.jsxs(x,{className:"sf-first",ref:l,height:"400px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:!0,externalDragAndDrop:!0,eventDragArea:".schedulers-container"},eventSettings:R,onDragStop:S(l),children:[t.jsx(y,{}),t.jsx(v,{}),t.jsx(T,{}),t.jsx(j,{})]})]}),t.jsxs("div",{style:{minWidth:0},children:[t.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler B"}),t.jsxs(x,{className:"sf-second",ref:u,height:"350px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:!0,externalDragAndDrop:!0,eventDragArea:".schedulers-container"},eventSettings:f,onDragStop:S(u),children:[t.jsx(y,{}),t.jsx(v,{}),t.jsx(T,{}),t.jsx(j,{})]})]}),t.jsxs("div",{style:{minWidth:0},children:[t.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler C"}),t.jsxs(x,{className:"sf-third",ref:D,height:"400px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:!0,externalDragAndDrop:!0,eventDragArea:".schedulers-container"},eventSettings:r,onDragStop:S(D),children:[t.jsx(y,{}),t.jsx(v,{}),t.jsx(T,{}),t.jsx(j,{})]})]})]})})};return t.jsx(a,{})}};var B,b,W;E.parameters={...E.parameters,docs:{...(B=E.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render: () => <TwoSchedulerExternalDnd />
}`,...(W=(b=E.parameters)==null?void 0:b.docs)==null?void 0:W.source}}};var V,L,C;I.parameters={...I.parameters,docs:{...(V=I.parameters)==null?void 0:V.docs,source:{originalSource:`{
  render: () => {
    const ThreeSchedulerExternalDnd: FC = () => {
      const schedulerARef = useRef<IScheduler>(null);
      const schedulerBRef = useRef<IScheduler>(null);
      const schedulerCRef = useRef<IScheduler>(null);
      const schedulerAEventSettings = {
        dataSource: makeEventsForDate(new Date(2017, 9, 30), 'A'),
        fields: {
          id: 'Id',
          subject: 'Subject',
          location: 'Location',
          description: 'Description',
          startTime: 'StartTime',
          endTime: 'EndTime',
          isAllDay: 'IsAllDay',
          isBlock: 'IsBlock',
          isReadonly: 'IsReadonly'
        }
      };
      const schedulerBEventSettings = {
        dataSource: makeEventsForDate(new Date(2017, 9, 30), 'B'),
        fields: {
          id: 'Id',
          subject: 'Subject',
          location: 'Location',
          description: 'Description',
          startTime: 'StartTime',
          endTime: 'EndTime',
          isAllDay: 'IsAllDay',
          isBlock: 'IsBlock',
          isReadonly: 'IsReadonly'
        }
      };
      const schedulerCEventSettings = {
        dataSource: makeEventsForDate(new Date(2017, 9, 30), 'C'),
        fields: {
          id: 'Id',
          subject: 'Subject',
          location: 'Location',
          description: 'Description',
          startTime: 'StartTime',
          endTime: 'EndTime',
          isAllDay: 'IsAllDay',
          isBlock: 'IsBlock',
          isReadonly: 'IsReadonly'
        }
      };
      const toSchedulerRecord = (data: EventModel): Record<string, any> => ({
        Id: Math.random().toString(36).slice(2) + Date.now().toString(36),
        Subject: data.Subject ?? 'Untitled',
        StartTime: data.StartTime ?? data.startTime,
        EndTime: data.EndTime ?? data.endTime,
        IsAllDay: data.IsAllDay ?? data.isAllDay,
        Location: data.Location ?? data.location,
        Description: data.Description ?? data.description
      });
      const getTargetSchedulerRef = (target: HTMLElement | null) => {
        if (!target) {
          return null;
        }
        if (target.closest('.sf-first')) {
          return schedulerARef;
        }
        if (target.closest('.sf-second')) {
          return schedulerBRef;
        }
        if (target.closest('.sf-third')) {
          return schedulerCRef;
        }
        return null;
      };
      const createDragStopHandler = (sourceRef: React.RefObject<IScheduler>) => (args: SchedulerDragEvent): void => {
        const targetEl = args.target as HTMLElement || null;
        if (!targetEl || !args.data) {
          return;
        }
        const targetRef = getTargetSchedulerRef(targetEl);
        if (!targetRef || targetRef === sourceRef) {
          return;
        }
        const raw = args.data as any;
        const id = raw.Id ?? raw.id;
        sourceRef.current?.deleteEvent?.(id as any);
        targetRef.current?.addEvent?.(toSchedulerRecord(args.data));
      };
      return <div className="control-section">\r
          <div className="schedulers-container" style={{
          display: 'grid',
          gridTemplateColumns: '1fr',
          gap: 16
        }}>\r
            <div style={{
            minWidth: 0
          }}>\r
              <h4 style={{
              margin: '0 0 8px'
            }}>Scheduler A</h4>\r
              <Scheduler className='sf-first' ref={schedulerARef} height={'400px'} width={'100%'} defaultSelectedDate={new Date(2017, 9, 30)} defaultView={'Week'} eventDrag={{
              enable: true,
              externalDragAndDrop: true,
              eventDragArea: '.schedulers-container'
            }} eventSettings={schedulerAEventSettings} onDragStop={createDragStopHandler(schedulerARef)}>\r
                <DayView />\r
                <WeekView />\r
                <WorkWeekView />\r
                <MonthView />\r
              </Scheduler>\r
            </div>\r
\r
            <div style={{
            minWidth: 0
          }}>\r
              <h4 style={{
              margin: '0 0 8px'
            }}>Scheduler B</h4>\r
              <Scheduler className='sf-second' ref={schedulerBRef} height={'350px'} width={'100%'} defaultSelectedDate={new Date(2017, 9, 30)} defaultView={'Week'} eventDrag={{
              enable: true,
              externalDragAndDrop: true,
              eventDragArea: '.schedulers-container'
            }} eventSettings={schedulerBEventSettings} onDragStop={createDragStopHandler(schedulerBRef)}>\r
                <DayView />\r
                <WeekView />\r
                <WorkWeekView />\r
                <MonthView />\r
              </Scheduler>\r
            </div>\r
\r
            <div style={{
            minWidth: 0
          }}>\r
              <h4 style={{
              margin: '0 0 8px'
            }}>Scheduler C</h4>\r
              <Scheduler className='sf-third' ref={schedulerCRef} height={'400px'} width={'100%'} defaultSelectedDate={new Date(2017, 9, 30)} defaultView={'Week'} eventDrag={{
              enable: true,
              externalDragAndDrop: true,
              eventDragArea: '.schedulers-container'
            }} eventSettings={schedulerCEventSettings} onDragStop={createDragStopHandler(schedulerCRef)}>\r
                <DayView />\r
                <WeekView />\r
                <WorkWeekView />\r
                <MonthView />\r
              </Scheduler>\r
            </div>\r
          </div>\r
        </div>;
    };
    return <ThreeSchedulerExternalDnd />;
  }
}`,...(C=(L=I.parameters)==null?void 0:L.docs)==null?void 0:C.source}}};const _=["SchedulerToScheduler","ThreeSchedulersExternalDnd"];export{E as SchedulerToScheduler,I as ThreeSchedulersExternalDnd,_ as __namedExportsOrder,U as default};
