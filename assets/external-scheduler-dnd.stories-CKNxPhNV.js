import{j as e}from"./index-7s7xaQU8.js";import{r as u}from"./index-CC6F48bw.js";import{S as W,D as $,W as k,a as N,M as O,u as ne}from"./month-view-BJ-OPtgR.js";/* empty css               */import"./index-qiR4Kxfn.js";const V={id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"},te=t=>({Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:t.Subject??"Untitled",StartTime:t.StartTime??t.startTime,EndTime:t.EndTime??t.endTime,IsAllDay:t.IsAllDay??t.isAllDay,Location:t.Location??t.location,Description:t.Description??t.description}),F=(t,n="")=>{const s=(h,x,w=0)=>new Date(h.getFullYear(),h.getMonth(),h.getDate(),x,w),c=new Date(t);c.setDate(t.getDate()-1);const a=new Date(t);a.setDate(t.getDate()+1);const i=new Date(t);i.setDate(t.getDate()+2);const d=new Date(t);d.setDate(t.getDate()+3);const r=new Date(t);r.setDate(t.getDate()+4);const S=new Date(t);return S.setDate(t.getDate()+5),[{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Offsite (All day)`,StartTime:new Date(c.getFullYear(),c.getMonth(),c.getDate()),EndTime:new Date(c.getFullYear(),c.getMonth(),c.getDate()),IsAllDay:!0,Location:"Offsite",Description:`${n} company offsite - previous day`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Standup`,StartTime:s(a,8),EndTime:s(a,10,30),IsAllDay:!1,Location:"Online",Description:`${n} daily standup`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Deployment`,StartTime:s(t,1),EndTime:s(t,3),IsAllDay:!1,Location:"Data Center",Description:`${n} overnight deployment spanning into next day`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Follow-up`,StartTime:s(a,15),EndTime:s(a,16),IsAllDay:!1,Location:"Headquarters",Description:`${n} post-event follow-up on next day`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Kickoff Meeting`,StartTime:s(c,10),EndTime:s(c,11),IsAllDay:!1,Location:"Conference Room 1",Description:`${n} project kickoff on Oct 29`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Planning Session`,StartTime:s(t,12),EndTime:s(t,13),IsAllDay:!1,Location:"War Room",Description:`${n} sprint planning on Oct 30`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Customer Demo`,StartTime:s(a,11),EndTime:s(a,12),IsAllDay:!1,Location:"Online",Description:`${n} product demo on Oct 31`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Design Review`,StartTime:s(i,14),EndTime:s(i,15,30),IsAllDay:!1,Location:"Design Lab",Description:`${n} design review on Nov 1`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Code Freeze`,StartTime:s(d,16),EndTime:s(d,18),IsAllDay:!1,Location:"Repository",Description:`${n} code freeze preparations on Nov 2`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Retrospective`,StartTime:s(r,10),EndTime:s(r,11,30),IsAllDay:!1,Location:"Conference Room 2",Description:`${n} sprint retrospective on Nov 3`},{Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:`${n} Team Outing`,StartTime:s(S,12),EndTime:s(S,14),IsAllDay:!1,Location:"City Park",Description:`${n} team outing on Nov 4`}]},re=({enable:t=!0,interval:n=15,excludeSelectors:s="",autoScroll:c=!0,scrollBy:a=5,timeDelay:i=10,externalDragAndDrop:d=!0,eventDragArea:r=".schedulers-container"})=>{const S=u.useRef(null),h=u.useRef(null),x=u.useRef(null),w=u.useRef(null),[L,v]=u.useState(()=>F(new Date(2017,9,30),"A")),[l,B]=u.useState(()=>F(new Date(2017,9,30),"B")),b=u.useRef(L),M=u.useRef(l),A={dataSource:L,fields:V},o={dataSource:l,fields:V};u.useEffect(()=>{v(b.current),B(M.current)},[t,n,s,c,a,i,d,r]);const f=(D,y)=>!!(D.current&&y&&D.current.contains(y)),p=(D,y)=>{var z,_,H,P;if(!d)return;const E=y.target;if(!E||!y.data)return;const j=D==="A"?S:h;if(!f(D==="A"?w:x,E))return;const T=y.data.Id??y.data.id;(_=(z=j.current)==null?void 0:z.deleteEvent)==null||_.call(z,T),(P=(H=(D==="A"?h:S).current)==null?void 0:H.addEvent)==null||P.call(H,te(y.data))},g=D=>p("A",D),I=D=>p("B",D);return e.jsxs("div",{className:"control-section",children:[e.jsxs("div",{className:"schedulers-container",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{ref:x,style:{minWidth:0},children:[e.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler A"}),e.jsxs(W,{className:"sf-first",ref:S,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:t,externalDragAndDrop:d,eventDragArea:r,interval:n,excludeSelectors:s,scroll:{enable:c,scrollBy:a,timeDelay:i}},eventSettings:A,onDragStop:g,children:[e.jsx($,{}),e.jsx(k,{}),e.jsx(N,{}),e.jsx(O,{})]})]}),e.jsxs("div",{ref:w,style:{minWidth:0},children:[e.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler B"}),e.jsxs(W,{className:"sf-second",ref:h,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:t,externalDragAndDrop:d,eventDragArea:r,interval:n,excludeSelectors:s,scroll:{enable:c,scrollBy:a,timeDelay:i}},eventSettings:o,onDragStop:I,children:[e.jsx($,{}),e.jsx(k,{}),e.jsx(N,{}),e.jsx(O,{})]})]})]}),e.jsx("p",{style:{marginTop:12,color:"#555"},children:"Drag events between the two schedulers. When an event is dropped in the other scheduler, it is removed from the source and added to the target."})]})},ge={title:"Scheduler/External Drag & Drop",parameters:{layout:"padded"},tags:["autodocs"]},Y={render:t=>e.jsx(re,{...t}),args:{enable:!0,interval:15,excludeSelectors:"",autoScroll:!0,scrollBy:10,timeDelay:100,externalDragAndDrop:!0,eventDragArea:".schedulers-container"},parameters:{controls:{include:["enable","interval","excludeSelectors","autoScroll","scrollBy","timeDelay","externalDragAndDrop","eventDragArea"]}},argTypes:{enable:{control:"boolean"},interval:{control:"number"},excludeSelectors:{control:"text"},autoScroll:{control:"boolean"},scrollBy:{control:"number"},timeDelay:{control:"number"},externalDragAndDrop:{control:"boolean"},eventDragArea:{control:"text"}}},se=t=>{const{enable:n=!0,interval:s=15,excludeSelectors:c="",autoScroll:a=!0,scrollBy:i=10,timeDelay:d=100,externalDragAndDrop:r=!0,eventDragArea:S=".schedulers-container"}=t,h=u.useRef(null),x=u.useRef(null),w=u.useRef(null),[L]=u.useState(()=>F(new Date(2017,9,30),"A")),[v]=u.useState(()=>F(new Date(2017,9,30),"B")),[l]=u.useState(()=>F(new Date(2017,9,30),"C")),B={dataSource:L,fields:V},b={dataSource:v,fields:V},M={dataSource:l,fields:V},A=f=>f?f.closest(".sf-first")?h:f.closest(".sf-second")?x:f.closest(".sf-third")?w:null:null,o=f=>p=>{var E,j,m,T;if(!r)return;const g=p.target||null;if(!g||!p.data)return;const I=A(g);if(!I||I===f)return;const D=p.data,y=D.Id??D.id;(j=(E=f.current)==null?void 0:E.deleteEvent)==null||j.call(E,y),(T=(m=I.current)==null?void 0:m.addEvent)==null||T.call(m,te(p.data))};return e.jsx("div",{className:"control-section",children:e.jsxs("div",{className:"schedulers-container",style:{display:"grid",gridTemplateColumns:"1fr",gap:16},children:[e.jsxs("div",{style:{minWidth:0},children:[e.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler A"}),e.jsxs(W,{className:"sf-first",ref:h,height:"400px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:n,interval:s,excludeSelectors:c,externalDragAndDrop:r,eventDragArea:S,scroll:{enable:a,scrollBy:i,timeDelay:d}},eventSettings:B,onDragStop:o(h),children:[e.jsx($,{}),e.jsx(k,{}),e.jsx(N,{}),e.jsx(O,{})]})]}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler B"}),e.jsxs(W,{className:"sf-second",ref:x,height:"350px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:n,interval:s,excludeSelectors:c,externalDragAndDrop:r,eventDragArea:S,scroll:{enable:a,scrollBy:i,timeDelay:d}},eventSettings:b,onDragStop:o(x),children:[e.jsx($,{}),e.jsx(k,{}),e.jsx(N,{}),e.jsx(O,{})]})]}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler C"}),e.jsxs(W,{className:"sf-third",ref:w,height:"400px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:n,interval:s,excludeSelectors:c,externalDragAndDrop:r,eventDragArea:S,scroll:{enable:a,scrollBy:i,timeDelay:d}},eventSettings:M,onDragStop:o(w),children:[e.jsx($,{}),e.jsx(k,{}),e.jsx(N,{}),e.jsx(O,{})]})]})]})})},R={render:t=>e.jsx(se,{...t})};R.args={enable:!0,interval:15,excludeSelectors:"",autoScroll:!0,scrollBy:10,timeDelay:100};R.args=Object.assign(R.args,{externalDragAndDrop:!0,eventDragArea:".schedulers-container"});R.parameters={controls:{include:["enable","interval","excludeSelectors","autoScroll","scrollBy","timeDelay","externalDragAndDrop","eventDragArea"]}};R.argTypes=Object.assign({},{enable:{control:"boolean"},interval:{control:"number"},excludeSelectors:{control:"text"},autoScroll:{control:"boolean"},scrollBy:{control:"number"},timeDelay:{control:"number"}},{externalDragAndDrop:{control:"boolean"},eventDragArea:{control:"text"}});const oe=({enable:t=!0,interval:n=15,externalDragAndDrop:s=!0,eventDragArea:c=".control-section"})=>{const a=u.useRef(null),i=u.useRef(null),[d,r]=u.useState([{id:"ext-1",Subject:"Interview",Description:"Candidate interview",Duration:60},{id:"ext-2",Subject:"Lunch",Description:"Team lunch",Duration:60},{id:"ext-3",Subject:"Code Review",Description:"Review PRs",Duration:30}]),[S,h]=u.useState(()=>F(new Date(2017,9,30),"E")),x=v=>{var y,E;const l=v.target||null;if(!l||!!!l.closest(".sf-scheduler"))return;const b=!!l.closest(".sf-all-day-row"),M=!!l.closest(".sf-work-cells"),A=!!l.closest(".sf-month-view");if(!b&&!M&&!A)return;const o=v.data,f=(o==null?void 0:o.ExternalId)??(o==null?void 0:o.id),p=Number((o==null?void 0:o.Duration)??60);let g=new Date,I=new Date(g.getTime()+p*6e4);if(M){const j=l.closest(".sf-work-cells")??l,m=((y=a.current)==null?void 0:y.getCellDetails(j))??null,T=m==null?void 0:m.startTime;T&&(g=T,I=new Date(g.getTime()+p*6e4))}else if(b||A){const j=l.closest("[data-date]"),m=((E=a.current)==null?void 0:E.getCellDetails(j))??null,T=m==null?void 0:m.startTime;T&&(g=T,I=new Date(g.getFullYear(),g.getMonth(),g.getDate()))}const D={Id:Math.random().toString(36).slice(2)+Date.now().toString(36),Subject:(o==null?void 0:o.Subject)??"Untitled",StartTime:g,EndTime:I,IsAllDay:b||A,Location:(o==null?void 0:o.Location)??"",Description:(o==null?void 0:o.Description)??""};h(j=>[...j,D]),f&&r(j=>j.filter(m=>m.id!==f))},w=v=>{if(!s||!v.data)return;const l=v.data,B=v.target||null;if(i.current&&B&&i.current.contains(B)){const b=l.Id??l.id;h(p=>p.filter(g=>g.Id!==b));const M=l.StartTime??l.startTime??l.start,A=l.EndTime??l.endTime??l.end;let o=60;try{o=Math.max(15,Math.round((new Date(A).getTime()-new Date(M).getTime())/6e4))}catch{}const f={id:"ext-"+Math.random().toString(36).slice(2),Subject:l.subject??l.Subject??"Untitled",Description:l.description??l.Description??"",Duration:o};r(p=>[...p,f]);return}},L={dataSource:S,fields:V};return e.jsx("div",{className:"control-section",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:16},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px"},children:"External Events"}),e.jsx("div",{className:"external-list",ref:i,style:{border:"1px dashed #ccc",padding:8,minHeight:200},children:d.map(v=>e.jsx(le,{item:v,onDrop:x},v.id))}),e.jsx("p",{style:{marginTop:12,color:"#555"},children:"Drag items to/from the Scheduler. Events dropped here are removed from the Scheduler."})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px"},children:"Scheduler"}),e.jsxs(W,{ref:a,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,9,30),defaultView:"Week",eventDrag:{enable:t,externalDragAndDrop:s,eventDragArea:c,interval:n},eventSettings:L,onDragStop:w,children:[e.jsx($,{}),e.jsx(k,{}),e.jsx(N,{}),e.jsx(O,{})]})]})]})})},C={args:{enable:!1},render:t=>e.jsx(oe,{...t})};C.args={enable:!0,interval:15,excludeSelectors:""};C.args=Object.assign(C.args??{},{externalDragAndDrop:!0,eventDragArea:".control-section"});C.parameters={controls:{include:["enable","interval","autoScroll","scrollBy","timeDelay","externalDragAndDrop","eventDragArea","cloneClassName"]}};C.argTypes=Object.assign({},{enable:{control:"boolean"},interval:{control:"number"}},{externalDragAndDrop:{control:"boolean"},eventDragArea:{control:"text"}});const le=({item:t,onDrop:n,cloneClassName:s="sf-event-clone"})=>{const c=u.useRef(null),a={__external:!0,ExternalId:t.id,...t};return ne(c,{clone:!0,cursorAt:{left:-5,top:-5},helper:i=>{const d=i.element,r=d.cloneNode(!0);return r.classList.add(s,"sf-external-drag-clone"),r.style.boxSizing="border-box",r.style.pointerEvents="none",r.style.position="fixed",r.style.zIndex="9999",r.style.border="2px solid rgba(var(--sf-color-on-surface))",r.style.boxShadow="var(--sf-elevation-3), var(--sf-elevation-3)",r.style.background="var(--sf-color-surface)",r.style.color="rgba(var(--sf-color-on-surface), 1)",r.style.display="block",r.style.width=`${d.offsetWidth}px`,r.style.height=`${d.offsetHeight}px`,document.body.appendChild(r),r},onDrag:i=>{try{window.dispatchEvent(new CustomEvent("sfExternalDragMove",{detail:{event:i.event,data:a}}))}catch{}},onDragStop:i=>{const d=i.event;try{window.dispatchEvent(new CustomEvent("sfExternalDragEnd",{detail:{event:i.event,data:a}}))}catch{}const r=d?document.elementFromPoint(d.clientX,d.clientY):null;try{document.querySelectorAll(".sf-external-drag-clone").forEach(h=>{var x;return(x=h.parentElement)==null?void 0:x.removeChild(h)})}catch{}!!(r&&r.closest(".sf-scheduler"))&&n({target:r,data:a})},enableTailMode:!0}),e.jsxs("div",{ref:c,style:{padding:8,marginBottom:8,background:"#fff",cursor:"grab",border:"1px solid #ddd"},children:[e.jsx("strong",{children:t.Subject}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:t.Description})]})};var U,q,K;Y.parameters={...Y.parameters,docs:{...(U=Y.parameters)==null?void 0:U.docs,source:{originalSource:`{
  render: args => <TwoSchedulerExternalDnd {...args} />,
  args: {
    enable: true,
    interval: 15,
    excludeSelectors: '',
    autoScroll: true,
    scrollBy: 10,
    timeDelay: 100,
    externalDragAndDrop: true,
    eventDragArea: '.schedulers-container'
  },
  parameters: {
    controls: {
      include: ['enable', 'interval', 'excludeSelectors', 'autoScroll', 'scrollBy', 'timeDelay', 'externalDragAndDrop', 'eventDragArea']
    }
  },
  argTypes: {
    enable: {
      control: 'boolean'
    },
    interval: {
      control: 'number'
    },
    excludeSelectors: {
      control: 'text'
    },
    autoScroll: {
      control: 'boolean'
    },
    scrollBy: {
      control: 'number'
    },
    timeDelay: {
      control: 'number'
    },
    externalDragAndDrop: {
      control: 'boolean'
    },
    eventDragArea: {
      control: 'text'
    }
  }
}`,...(K=(q=Y.parameters)==null?void 0:q.docs)==null?void 0:K.source}}};var X,G,J;R.parameters={...R.parameters,docs:{...(X=R.parameters)==null?void 0:X.docs,source:{originalSource:`{
  render: (args: any) => <ThreeSchedulerExternalDndComp {...args} />
}`,...(J=(G=R.parameters)==null?void 0:G.docs)==null?void 0:J.source}}};var Q,Z,ee;C.parameters={...C.parameters,docs:{...(Q=C.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    enable: false
  },
  render: (args: any) => <ExternalListToSchedulerComp {...args} />
}`,...(ee=(Z=C.parameters)==null?void 0:Z.docs)==null?void 0:ee.source}}};const De=["SchedulerToScheduler","ThreeSchedulersExternalDnd","ExternalListToScheduler"];export{C as ExternalListToScheduler,Y as SchedulerToScheduler,R as ThreeSchedulersExternalDnd,De as __namedExportsOrder,ge as default};
